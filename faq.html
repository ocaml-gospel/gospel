<!doctype html>
<html lang="en" dir="ltr" class="mdx-wrapper mdx-page plugin-pages plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.21">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css" integrity="sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc" crossorigin="anonymous"><title data-rh="true">FAQ | Gospel</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://ocaml-gospel.github.io/gospel/faq"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="FAQ | Gospel"><meta data-rh="true" name="description" content="Your question is not answered here? Feel free to [open a"><meta data-rh="true" property="og:description" content="Your question is not answered here? Feel free to [open a"><link data-rh="true" rel="canonical" href="https://ocaml-gospel.github.io/gospel/faq"><link data-rh="true" rel="alternate" href="https://ocaml-gospel.github.io/gospel/faq" hreflang="en"><link data-rh="true" rel="alternate" href="https://ocaml-gospel.github.io/gospel/faq" hreflang="x-default"><link rel="stylesheet" href="/gospel/assets/css/styles.a780f60c.css">
<link rel="preload" href="/gospel/assets/js/runtime~main.2940c8b2.js" as="script">
<link rel="preload" href="/gospel/assets/js/main.f8532c57.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/gospel/"><b class="navbar__title text--truncate">Gospel</b></a><a class="navbar__item navbar__link" href="/gospel/">Docs</a><a class="navbar__item navbar__link" href="/gospel/stdlib">Standard Library</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/gospel/faq">FAQ</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/ocaml-gospel/gospel" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><main class="container container--fluid margin-vert--lg"><div class="row mdxPageWrapper_j9I6"><div class="col col--8"><h1>Frequently asked questions</h1><p>Your question is not answered here? Feel free to <a href="https://github.com/ocaml-gospel/gospel/discussions/new" target="_blank" rel="noopener noreferrer">open a
discussion</a> so we can
answer it and add it here.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="can-i-use-my-ocaml-functions-in-specifications">Can I use my OCaml functions in specifications?<a class="hash-link" href="#can-i-use-my-ocaml-functions-in-specifications" title="Direct link to heading">​</a></h2><p><strong>Sometimes.</strong> Logic and programs are two separated worlds, and using programs
in our logic can introduce inconsistencies, so you cannot use OCaml values in
your specifications. If you need to write functions as shortcuts in your
specifications, you may want to add <a href="/gospel/language/logical">logical functions or
predicates</a> instead.</p><p>However, some OCaml functions are also safe to use in the specifications. We
call them <em>pure</em>. You can read the <a href="/gospel/language/function-contracts#pure-functions">dedicated documentation
section</a> about pure values to learn
more about them.</p><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="are-formulae-the-same-as-ocaml-boolean-expressions">Are formulae the same as OCaml Boolean expressions?<a class="hash-link" href="#are-formulae-the-same-as-ocaml-boolean-expressions" title="Direct link to heading">​</a></h2><p><strong>No.</strong> We chose a syntax close to OCaml expressions because we believe it makes
it easy for OCaml developers to use Gospel, but Gospel formulae are not OCaml
expressions, and some of them are not even executable or decidable.</p><p>The following specification is not executable, as you cannot test a property on
every possible array:</p><div class="language-ocaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ocaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">val</span><span class="token plain"> total_weight </span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> weight</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token type-variable function" style="color:rgb(153, 76, 195);font-style:italic">&#x27;a</span><span class="token plain"> array </span><span class="token operator" style="color:rgb(12, 150, 155)">-&gt;</span><span class="token plain"> int</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">-&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token type-variable function" style="color:rgb(153, 76, 195);font-style:italic">&#x27;a</span><span class="token plain"> array</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> list </span><span class="token operator" style="color:rgb(12, 150, 155)">-&gt;</span><span class="token plain"> int</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">(*@ y = total_weight ~weight l</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#403f53"><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">    requires forall a. weight a &gt;= 0</span><br></span><span class="token-line" style="color:#403f53"><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">    ensures y = List.fold_left (fun acc a -&gt; acc + weight a) l *)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="are-formulae-typechecked-by-the-ocaml-compiler">Are formulae typechecked by the OCaml compiler?<a class="hash-link" href="#are-formulae-typechecked-by-the-ocaml-compiler" title="Direct link to heading">​</a></h2><p><strong>No.</strong> The OCaml compiler does not know about Gospel specifications at all, so
it simply ignores them.</p><p><strong>But...</strong> we, however, provide a typechecker for Gospel annotations. It reads
your interface file and performs typechecking and some sanity checks to verify
that your specification is well-formed. You can invoke the Gospel typechecker by
invoking <code>gospel check</code> on your interface file.</p><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="are-formulae-tested-at-runtime">Are formulae tested at runtime?<a class="hash-link" href="#are-formulae-tested-at-runtime" title="Direct link to heading">​</a></h2><p><strong>No.</strong> Gospel does not provide runtime assertion checking for your code, it can
only check if your specifications are well-formed. If you are interested in
runtime assertion checking for your code, you might want to use
<a href="https://github.com/ocaml-gospel/ortac" target="_blank" rel="noopener noreferrer">Ortac</a> on top of Gospel.</p><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="are-formulae-verified-by-gospel">Are formulae verified by Gospel?<a class="hash-link" href="#are-formulae-verified-by-gospel" title="Direct link to heading">​</a></h2><p><strong>No.</strong> Gospel does not feature deductive verification, it can only check if
your specifications are well-formed. External tools will let you
verify Gospel specifications though:</p><ul><li><a href="https://github.com/ocaml-gospel/why3gospel" target="_blank" rel="noopener noreferrer">Why3gospel</a> if your
implementation is written using <a href="http://why3.lri.fr" target="_blank" rel="noopener noreferrer">Why3</a>.</li><li><a href="https://github.com/ocaml-gospel/cameleer" target="_blank" rel="noopener noreferrer">Cameleer</a> if your implementation
is written using OCaml.</li></ul><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-if-i-write-1--0-in-a-formula">What if I write <code>1 / 0</code> in a formula?<a class="hash-link" href="#what-if-i-write-1--0-in-a-formula" title="Direct link to heading">​</a></h2><p><strong>You can.</strong> Indeed, the logic of Gospel is <em>total</em>, which means that
<code>1 / 0</code> is a legal term of type <code>integer</code>. Yet, we do not know its
value, nor if its value is the same as <code>2 / 0</code>. Similarly, we can
access an array out of its bounds but the result is unspecified.</p><p>Using such unspecified terms in specifications is considered bad
practice, and is even likely to be errors in your specifications.
Note that when using runtime assertion checking tools such as
<a href="https://github.com/ocaml-gospel/ortac" target="_blank" rel="noopener noreferrer">Ortac</a>, the evaluation of
terms such as <code>1 / 0</code> will be signaled as a runtime error.</p><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-are-ghost-arguments">What are ghost arguments?<a class="hash-link" href="#what-are-ghost-arguments" title="Direct link to heading">​</a></h2><p>Ghost arguments are function arguments that do not exist in the OCaml interface,
but that you can add to simplify your specification. To understand how they can
be useful and how to use them, you may want to read the <a href="/gospel/walkthroughs/fibonacci">Fibonacci
walk-through</a>.</p><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-are-ghost-types-for">What are ghost types for?<a class="hash-link" href="#what-are-ghost-types-for" title="Direct link to heading">​</a></h2><p>Ghost types do not exist in the original OCaml interface, but you can add some
to simplify your specification by referring to values that have no code
counterpart or are not exposed. You can read the <a href="/gospel/walkthroughs/union-find">Union-find
example</a> to find an example specification using this
feature.</p><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-would-i-need-ghost-values">Why would I need ghost values?<a class="hash-link" href="#why-would-i-need-ghost-values" title="Direct link to heading">​</a></h2><p>Why would you need ghost values, since no code can call them, right? Ghost
values will indeed never be used by programs, as they don&#x27;t even exist in the
code.</p><p>However, consider an interface containing a ghost type, taken as (ghost)
argument by some of your OCaml functions:</p><div class="language-ocaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ocaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">(*@ type t *)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">val</span><span class="token plain"> f </span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> int </span><span class="token operator" style="color:rgb(12, 150, 155)">-&gt;</span><span class="token plain"> int</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">(*@ y = f [t : t] x</span><br></span><span class="token-line" style="color:#403f53"><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">    pure</span><br></span><span class="token-line" style="color:#403f53"><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">    ... *)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now, every specification that refers to <code>f</code> needs to pass the <code>t</code> argument to
that function. You can propagate that requirement again, but you may also need
to actually instantiate such a value and pass it directly:</p><div class="language-ocaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ocaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">val</span><span class="token plain"> g </span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> int </span><span class="token operator" style="color:rgb(12, 150, 155)">-&gt;</span><span class="token plain"> int</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">(*@ y = g x</span><br></span><span class="token-line" style="color:#403f53"><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">    requires let t = make () in</span><br></span><span class="token-line" style="color:#403f53"><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">             f t x = y *)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Of course, that <code>make</code> function does not exist either, so you also need to
declare it as a ghost value:</p><div class="language-ocaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#403f53;--prism-background-color:#FBFBFB"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ocaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#403f53"><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">(*@ val make : unit -&gt; t *)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#can-i-use-my-ocaml-functions-in-specifications" class="table-of-contents__link toc-highlight">Can I use my OCaml functions in specifications?</a></li><li><a href="#are-formulae-the-same-as-ocaml-boolean-expressions" class="table-of-contents__link toc-highlight">Are formulae the same as OCaml Boolean expressions?</a></li><li><a href="#are-formulae-typechecked-by-the-ocaml-compiler" class="table-of-contents__link toc-highlight">Are formulae typechecked by the OCaml compiler?</a></li><li><a href="#are-formulae-tested-at-runtime" class="table-of-contents__link toc-highlight">Are formulae tested at runtime?</a></li><li><a href="#are-formulae-verified-by-gospel" class="table-of-contents__link toc-highlight">Are formulae verified by Gospel?</a></li><li><a href="#what-if-i-write-1--0-in-a-formula" class="table-of-contents__link toc-highlight">What if I write <code>1 / 0</code> in a formula?</a></li><li><a href="#what-are-ghost-arguments" class="table-of-contents__link toc-highlight">What are ghost arguments?</a></li><li><a href="#what-are-ghost-types-for" class="table-of-contents__link toc-highlight">What are ghost types for?</a></li><li><a href="#why-would-i-need-ghost-values" class="table-of-contents__link toc-highlight">Why would I need ghost values?</a></li></ul></div></div></div></main></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2020—2022 Gospel maintainers.</div></div></div></footer></div>
<script src="/gospel/assets/js/runtime~main.2940c8b2.js"></script>
<script src="/gospel/assets/js/main.f8532c57.js"></script>
</body>
</html>